<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">
  <link rel="icon" type="image/svg+xml" href="/farm.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <meta name="theme-color" content="#32CD32" />
  <title>N√¥ng tr·∫°i c·ªï t√≠ch</title>
  <meta name="description"
    content="Kh√°m ph√° th·∫ø gi·ªõi n√¥ng tr·∫°i c·ªï t√≠ch tuy·ªát ƒë·∫πp ‚Äì n∆°i b·∫°n tr·ªü th√†nh n√¥ng d√¢n t√≠ hon, tr·ªìng tr·ªçt, chƒÉn nu√¥i v√† x√¢y d·ª±ng v∆∞∆°ng qu·ªëc m·ªông m∆°! Ch∆°i game mi·ªÖn ph√≠, ƒë·ªì h·ªça si√™u d·ªÖ th∆∞∆°ng, c·∫≠p nh·∫≠t li√™n t·ª•c!">
  <meta name='dmca-site-verification' content='R3ZtelJHa3BQNkkxNnJtNk5NK0hvNTVHV2NTSVlqS0pWVEl3NXhacmhYUT01' />
  <meta property="og:type" content="website">
  <meta property="og:url" content="/">
  <meta property="og:title" content="Game N√¥ng Tr·∫°i C·ªï T√≠ch ‚Äì Tr·ªìng Tr·ªçt & Phi√™u L∆∞u Trong Th·∫ø Gi·ªõi M·ªông M∆°">
  <meta property="og:description"
    content="Tham gia th·∫ø gi·ªõi n√¥ng tr·∫°i c·ªï t√≠ch ‚Äì game m√¥ ph·ªèng d·ªÖ th∆∞∆°ng, x√¢y d·ª±ng n√¥ng tr·∫°i m·ªông m∆°, tr·ªìng c√¢y, nu√¥i th√∫ v√† phi√™u l∆∞u k·ª≥ th√∫!">
  <meta property="og:image" content="/logo.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="/">
  <meta name="twitter:title" content="Game N√¥ng Tr·∫°i C·ªï T√≠ch ‚Äì Tr·ªìng Tr·ªçt & Phi√™u L∆∞u Trong Th·∫ø Gi·ªõi M·ªông M∆°">
  <meta name="twitter:description"
    content="Tham gia th·∫ø gi·ªõi n√¥ng tr·∫°i c·ªï t√≠ch ‚Äì game m√¥ ph·ªèng d·ªÖ th∆∞∆°ng, x√¢y d·ª±ng n√¥ng tr·∫°i m·ªông m∆°, tr·ªìng c√¢y, nu√¥i th√∫ v√† phi√™u l∆∞u k·ª≥ th√∫!">
  <meta name="twitter:image" content="/logo.png">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZF7SSMMNEC"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-ZF7SSMMNEC');
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <script type="module" crossorigin src="/assets/index-DgIkqiK5.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index.DyxWAVHG.css">
  <link rel="manifest" href="/manifest.webmanifest">
  <script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script>
</head>

<body>
  <div id="root"></div>
  <a href="//www.dmca.com/Protection/Status.aspx?ID=36914ceb-ba3d-4c93-a0ff-a11ede1bd0b4"
    title="DMCA.com Protection Status" class="dmca-badge"> <img
      src="https://images.dmca.com/Badges/dmca_protected_sml_120g.png?ID=36914ceb-ba3d-4c93-a0ff-a11ede1bd0b4"
      alt="DMCA.com Protection Status" /></a>
  <script src="https://images.dmca.com/Badges/DMCABadgeHelper.min.js"> </script>
  <script src="cordova.js"></script>

  <!-- <script>
    if (window.top !== window.self) {
      window.location.href = 'https://truyencotich.click/';
    }
  </script> -->
  <script>
    document.addEventListener('deviceready', () => {
      console.log('‚úÖ Device ready');

      // Ki·ªÉm tra plugin
      if (!cordova?.plugins?.notification?.local) {
        console.error('‚ùå Plugin Local Notification ch∆∞a ƒë∆∞·ª£c load');
        return;
      }

      const localNotif = cordova.plugins.notification.local;

      // --- B∆∞·ªõc 1: Xin quy·ªÅn (ƒë·∫∑c bi·ªát c·∫ßn cho Android 13+) ---
      localNotif.hasPermission((has) => {
        if (!has) {
          localNotif.requestPermission((granted) => {
            console.log('üîî Quy·ªÅn th√¥ng b√°o:', granted);
            if (!granted) {
              alert('App c·∫ßn quy·ªÅn g·ª≠i th√¥ng b√°o ƒë·ªÉ ho·∫°t ƒë·ªông.');
              return;
            }
            scheduleNotification();
          });
        } else {
          scheduleNotification();
        }
      });

      // --- B∆∞·ªõc 2: H√†m schedule 1 notification ---
      function scheduleNotification() {
        console.log('üìÖ Scheduling notification...');
        localNotif.schedule({
          id: 1,
          title: 'üåæ Nh·∫Øc nhi·ªám v·ª•',
          text: 'V√†o farm thu ho·∫°ch n√†o!',
          trigger: { in: 1, unit: 'minute' }, // 1 ph√∫t sau
          sound: true,
          smallIcon: 'res://ic_stat_notify', // ph·∫£i t·ªìn t·∫°i trong res/drawable
          foreground: true, // hi·ªÉn th·ªã c·∫£ khi app ƒëang m·ªü
          vibrate: true
        });
      }

      // --- B∆∞·ªõc 3: L·∫Øng nghe s·ª± ki·ªán ---
      localNotif.on('trigger', (notification) => {
        console.log('‚è∞ Notification triggered:', notification);
      });

      localNotif.on('click', (notification) => {
        console.log('üëÜ User clicked:', notification);
        alert('B·∫°n v·ª´a nh·∫•n v√†o th√¥ng b√°o: ' + notification.title);
      });
    });

    // document.addEventListener('deviceready', async () => {
    //   await admob.start()

    //   // admob.configure({
    //   //   testDeviceIds: ['7a249b39-efe7-4dd4-a903-291448390a67'],
    //   // })

    //   const ad = new admob.AppOpenAd({
    //     adUnitId: 'ca-app-pub-3940256099942544/9257395921',
    //   })

    //   document.addEventListener(
    //     'resume',
    //     async () => {
    //       if (!await ad.show()) {
    //         await ad.load()
    //       }
    //     },
    //     false,
    //   )
    // }, false)

    // document.addEventListener('admob.ad.show', async (evt) => {
    //   if (evt.ad instanceof admob.AppOpenAd) {
    //     console.log("Show ads");
    //   }
    // })

    let interstitial

    document.addEventListener('deviceready', async () => {
      await admob.start()

      admob.configure({
        testDeviceIds: ['7a249b39-efe7-4dd4-a903-291448390a67'],
      })

      interstitial = new admob.InterstitialAd({
        adUnitId: 'ca-app-pub-3940256099942544/1033173712',
      })

      interstitial.on('load', (evt) => {
        // evt.ad
      })

      await interstitial.load()
      await interstitial.show()
    }, false)

    document.addEventListener('admob.ad.dismiss', async () => {
      // Once a interstitial ad is shown, it cannot be shown again.
      // Starts loading the next interstitial ad as soon as it is dismissed.
      await interstitial.load()
    })

  </script>
</body>

</html>